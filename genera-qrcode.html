<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Generatore QR Code per Il Mondo degli Spiritelli</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <style>
        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f7;
            color: #333;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 {
            color: #1a1a2e;
            margin-bottom: 10px;
        }
        p {
            color: #555;
            margin-bottom: 20px;
        }
        .qr-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 30px;
            justify-content: center;
        }
        .qr-item {
            text-align: center;
            margin-bottom: 30px;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            width: 200px;
        }
        .qr-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        .qr-title {
            margin: 0;
            font-size: 18px;
            padding: 10px 0;
            border-radius: 6px;
            color: white;
            margin-bottom: 15px;
        }
        .qr-desc {
            font-size: 14px;
            margin-bottom: 15px;
            color: #555;
            min-height: 60px;
        }
        .btn-generate {
            background-color: #5ce1e6;
            color: #1a1a2e;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(92, 225, 230, 0.4);
        }
        .btn-generate:hover {
            background-color: #38b6ff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(56, 182, 255, 0.4);
        }
        .btn-download {
            background-color: #1a1a2e;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 12px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .btn-download:hover {
            background-color: #5ce1e6;
            color: #1a1a2e;
        }
        canvas {
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .color-preview {
            width: 20px;
            height: 20px;
            display: inline-block;
            margin-right: 5px;
            vertical-align: middle;
            border-radius: 50%;
        }
        .value-badge {
            display: inline-block;
            background-color: #f1f1f1;
            color: #333;
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 10px;
            margin-top: 8px;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            color: #888;
            font-size: 14px;
        }
        .print-btn {
            background-color: #1a1a2e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 30px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .print-btn:hover {
            background-color: #5ce1e6;
            color: #1a1a2e;
        }
        @media print {
            .no-print {
                display: none;
            }
            .qr-item {
                box-shadow: none;
                page-break-inside: avoid;
            }
            body {
                background-color: white;
            }
        }
    </style>
</head>
<body>
<header>
    <h1>Generatore QR Code per "Il Mondo degli Spiritelli"</h1>
    <p>Crea tutti i QR code necessari per la tua avventura AR interattiva!</p>
    <button class="btn-generate" onclick="generateQRCodes()">Genera QR Codes</button>
</header>

<div class="qr-container" id="qrContainer"></div>

<div id="printButtons" style="text-align: center; display: none;">
    <button class="print-btn no-print" onclick="window.print()">Stampa tutti i QR code</button>
</div>

<footer class="no-print">
    <p>Generati per l'applicazione AR "Il Mondo degli Spiritelli"</p>
</footer>

<script>
    // Definizione dei QR code da generare con i loro colori e descrizioni
    const qrDefinitions = [
        { value: "0", name: "Brochure", color: "#1a1a2e", bgColor: "#FFFFFF",
            desc: "QR code iniziale che introduce la storia" },
        { value: "1", name: "Giallo", color: "#E6B800", bgColor: "#FFFDE7",
            desc: "Spiritello con i pacchi che cadono" },
        { value: "2", name: "Blu", color: "#0077CC", bgColor: "#E3F2FD",
            desc: "Spiritello dell'acqua che corre" },
        { value: "3", name: "Blu 2", color: "#0077CC", bgColor: "#E3F2FD",
            desc: "Continuazione storia del tubo" },
        { value: "4", name: "Blu 3", color: "#0077CC", bgColor: "#E3F2FD",
            desc: "Tubo chiuso" },
        { value: "5", name: "Rosa", color: "#FF69B4", bgColor: "#FCE4EC",
            desc: "Spiritello dei fiori" },
        { value: "6", name: "Rosso", color: "#E53935", bgColor: "#FFEBEE",
            desc: "Spiritello cattivo" },
        { value: "7", name: "Arcobaleno", color: "#9C27B0", bgColor: "#F3E5F5",
            desc: "Finale con tutti gli spiritelli" }
    ];

    function generateQRCodes() {
        const container = document.getElementById('qrContainer');
        container.innerHTML = '';

        qrDefinitions.forEach(def => {
            const qrDiv = document.createElement('div');
            qrDiv.className = 'qr-item';

            // Crea il titolo
            const title = document.createElement('h2');
            title.className = 'qr-title';
            title.style.backgroundColor = def.color;
            title.innerHTML = `QR Code ${def.name}`;
            qrDiv.appendChild(title);

            // Descrizione
            const desc = document.createElement('div');
            desc.className = 'qr-desc';
            desc.textContent = def.desc;
            qrDiv.appendChild(desc);

            // Genera QR Code
            const qr = qrcode(0, 'L');
            qr.addData(def.value);
            qr.make();

            // Inserisci il QR code colorato con canvas
            const canvas = document.createElement('canvas');
            canvas.width = 160;
            canvas.height = 160;
            const ctx = canvas.getContext('2d');

            // Sfondo
            ctx.fillStyle = def.bgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Disegna il QR code
            const moduleCount = qr.getModuleCount();
            const moduleSize = canvas.width / (moduleCount + 4); // Aggiungi margine
            const margin = 2 * moduleSize;

            ctx.fillStyle = def.color;
            for (let row = 0; row < moduleCount; row++) {
                for (let col = 0; col < moduleCount; col++) {
                    if (qr.isDark(row, col)) {
                        ctx.fillRect(
                            margin + col * moduleSize,
                            margin + row * moduleSize,
                            moduleSize,
                            moduleSize
                        );
                    }
                }
            }

            qrDiv.appendChild(canvas);

            // Aggiungi pulsante di download
            const downloadBtn = document.createElement('button');
            downloadBtn.className = 'btn-download no-print';
            downloadBtn.textContent = 'Scarica';
            downloadBtn.onclick = function() {
                const a = document.createElement('a');
                a.href = canvas.toDataURL('image/png');
                a.download = `qrcode-${def.name.toLowerCase()}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };
            qrDiv.appendChild(downloadBtn);

            // Valore QR
            const valueLabel = document.createElement('div');
            valueLabel.className = 'value-badge';
            valueLabel.textContent = `Valore: ${def.value}`;
            qrDiv.appendChild(valueLabel);

            container.appendChild(qrDiv);
        });

        // Mostra il pulsante di stampa
        document.getElementById('printButtons').style.display = 'block';
    }

    // Genera automaticamente i QR code all'avvio
    window.onload = function() {
        generateQRCodes();
    };
</script>
</body>
</html>