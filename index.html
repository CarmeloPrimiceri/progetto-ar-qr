<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esperienza AR con MindAR</title>

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

    <!-- MindAR -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <!-- Mixer per animazioni GLTF -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<!-- Schermata di caricamento -->
<div class="loading-screen">
    <div class="spinner"></div>
    <div class="loading-text">Caricamento dell'esperienza AR...</div>
</div>

<!-- Istruzioni -->
<div class="instructions">
    Punta la fotocamera verso l'immagine target per far apparire un personaggio 3D
</div>

<!-- Container per il dialogo -->
<div class="dialog-container">
    <div class="dialog-text"></div>
    <div class="choices-container"></div>
</div>

<!-- Scena AR -->
<a-scene
        mindar-image="imageTargetSrc: assets/targets/markers.mind;"
        color-space="sRGB"
        renderer="colorManagement: true; physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">

    <a-assets>
        <a-asset-item id="robot-model" src="assets/models/robot.glb"></a-asset-item>
        <a-asset-item id="ghost-model" src="assets/models/ghost.glb"></a-asset-item>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <!-- I modelli 3D verranno aggiunti come entità figlie dei target -->
    <a-entity mindar-image-target="targetIndex: 0">
        <!-- Il primo modello 3D verrà inserito qui tramite JavaScript -->
    </a-entity>

    <a-entity mindar-image-target="targetIndex: 1">
        <!-- Il secondo modello 3D verrà inserito qui tramite JavaScript -->
    </a-entity>
</a-scene>

<!-- JavaScript -->
<script src="js/dialog.js"></script>
<script src="js/main.js"></script>
</body>
</html>